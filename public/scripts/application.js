// Generated by CoffeeScript 1.7.1
(function() {
  window.ScamDatabase = angular.module("ScamDatabase", []);

  ScamDatabase.controller('ScammerController', function($scope, $http) {
    return $http.get("/scammers").success(function(data) {
      $scope.scammers = data;
      $scope.recordsPerPage = 10;
      $scope.curPage = 0;
      $scope.numPages = function() {
        return Math.ceil($scope.scammers / $scope.recordsPerPage);
      };
    }).error(function(err) {
      return $scope.scammers = -1;
    });
  });

  ScamDatabase.filter("capitalize", function() {
    return function(input) {
      var words;
      if (input && isNaN(input)) {
        words = input.split(" ");
        $.each(words, function(index, word) {
          return words[index] = word.charAt(0).toUpperCase() + word.slice(1);
        });
        return words.join();
      }
    };
  });

  ScamDatabase.filter("startAt", function() {
    return function(input, start) {
      if (input instanceof Object) {
        return input.slice(parseInt(start));
      }
    };
  });

  $(document).ready(function() {
    if (window.location.search === "?success") {
      $("#sub-success").toggle();
    }
    if (window.location.search.match(/\?errors=true(\w+)*$/)) {
      return $("#sub-failure").toggle();
    }
  });

}).call(this);
